(function(e){function t(t){for(var n,c,o=t[0],u=t[1],l=t[2],d=0,f=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);s&&s(t);while(f.length)f.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var u=r[o];0!==a[u]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},i=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/unrest-form/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var s=u;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},4945:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),a={class:"unrest-app-root"};function i(e,t,r,i,c,o){var u=Object(n["w"])("app-nav"),l=Object(n["w"])("router-view");return Object(n["q"])(),Object(n["d"])("div",a,[Object(n["g"])(u),Object(n["g"])(l)])}var c={class:"navbar"},o=Object(n["g"])("div",{class:"navbar-brand"},"@unrest/vue-mousetrap",-1),u={class:"navbar-section flex items-center"},l=Object(n["g"])("a",{href:"http://github.com/chriscauley/unrest-form",class:"btn -light"},[Object(n["g"])("i",{class:"fa fa-github fa-2x"})],-1);function s(e,t,r,a,i,s){var d=Object(n["w"])("router-link");return Object(n["q"])(),Object(n["d"])("header",c,[o,Object(n["g"])("div",u,[(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["u"])(i.tabs,(function(e){return Object(n["q"])(),Object(n["d"])("div",{class:s.css.tab(e),key:e[0]},[Object(n["g"])(d,{to:e[0]},{default:Object(n["D"])((function(){return[Object(n["f"])(Object(n["z"])(e[1]),1)]})),_:2},1032,["to"])],2)})),128)),l])])}var d=r("3835"),f=[["/","Basics"],["/lazy/","Lazy"]],p={data:function(){return{tabs:f}},computed:{css:function(){var e=this;return{tab:function(t){var r=Object(d["a"])(t,1),n=r[0];return["btn",n===e.$route.path?"-primary":"-light"]}}}}};p.render=s;var b=p,m={components:{AppNav:b}};m.render=i;var h=m,j=r("5530"),O=(r("159b"),r("4fad"),{class:"ur-form__actions"}),v=Object(n["g"])("button",{type:"submit",class:"btn -primary"},"Submit",-1);function g(e,t,r,a,i,c){var o,u=Object(n["w"])("ur-field");return Object(n["q"])(),Object(n["d"])("form",{onSubmit:t[2]||(t[2]=Object(n["F"])((function(){return c.submit&&c.submit.apply(c,arguments)}),["prevent"])),class:"ur-form"},[Object(n["g"])(u,{modelValue:r.state,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.state=e}),field:c.field,key:c.field.id,onChange:c.change},null,8,["modelValue","field","onChange"]),(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["u"])(null===(o=c.computed_errors)||void 0===o?void 0:o.__root,(function(e,t){return Object(n["q"])(),Object(n["d"])("div",{key:t,class:"form-error"},Object(n["z"])(e.message),1)})),128)),Object(n["g"])("div",O,[Object(n["v"])(e.$slots,"actions",{},(function(){return[v]}))])],32)}var y=r("2909"),_=(r("b64b"),r("b0c0"),r("99af"),r("a15b"),r("a41b")),w=function e(t){var r={};return Object.entries(t).forEach((function(t){var n=Object(d["a"])(t,2),a=n[0],i=n[1];if(void 0!==i&&null!==i&&""!==i)if(i.constructor===Object){var c=e(i);Object.keys(c).length>0&&(r[a]=c)}else r[a]=i})),r},V=function(e,t){var r=new _["Validator"],n=r.validate(w(e),t);if(!n.errors.length)return null;var a={};return n.errors.forEach((function(e){var t=e.path,r=e.argument,n=e.message,i=e.name;t=[].concat(Object(y["a"])(t),[r]),a[t.join(".")]="required"===i?"This field is required.":n})),a},q=function e(t,r){return"object"===r.type?(t=t||{},Object.entries(r.properties).forEach((function(r){var n=Object(d["a"])(r,2),a=n[0],i=n[1];t[a]=e(t[a],i)})),t):t||r.default},x=q,k=(r("caad"),r("2532"),r("fb6a"),r("ac1f"),r("5319"),{toSentenceCase:function(e){return e=e.replace(/([A-Z])/g," $1").toLowerCase().replace(/_/g," "),e[0].toUpperCase()+e.slice(1)}}),C=r("53ca"),z=["number","string","boolean"],S=function e(t){if(null===t||void 0===t)return{};for(var r=0;r<z.length;r++)if(Object(C["a"])(t)===z[r])return{default:t,type:z[r]};if(Array.isArray(t))return{type:"array",default:t,items:e(t[0])};if("lazy"===t.type){var n={};return Object.entries(t).forEach((function(t){var r=Object(d["a"])(t,2),a=r[0],i=r[1];return n[a]=e(i)})),delete n.type,{type:"object",properties:n}}if(t.type)return t;throw"Unrecognized schema object for parseLazySchema"},F=S,N=function(e){return"object"===e.type?"ur-object":e.enum?"ur-select":"boolean"===e.type?"ur-checkbox":"image"===e.type?"ur-image":"color"===e.format?"ur-color":"ur-text"},A=function(e,t){var r={type:"text",tagName:N(e)};return"number"===e.type&&(r.type="number"),e.name.includes("password")&&(r.type="password"),Object.assign(r,t[e.name],e.ui)},E=function(e,t){var r=Object.assign({},t),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.ui,i=void 0===a?{}:a,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return"lazy"===r.type&&(r=F(r)),r.name=e,r.id="id__".concat(r.name),r.ui=A(r,i),r.title||(r.title=k.toSentenceCase(r.name)),r.__path=c.slice(),"__root"!==e&&r.__path.push(r.name),r},U={provide:function(){return{ur_form:this}},props:{schema:Object,uiSchema:Object,state:{type:Object,default:function(){return{}}},onSubmit:{type:Function,default:function(){}},onChange:{type:Function,default:function(){}},errors:Object},data:function(){return{internal_errors:null}},computed:{computed_errors:function(){var e=Object(j["a"])(Object(j["a"])({},this.errors),this.internal_errors);return e.__all__&&(e.__root=e.__all__),e},field:function(){return E("__root",this.schema)}},beforeMount:function(){x(this.state,this.field)},methods:{handleError:function(e){var t,r,n,a;(e.message&&(this.internal_errors={__root:e.message||e}),null!==(t=e.response)&&void 0!==t&&null!==(r=t.data)&&void 0!==r&&r.errors)&&(this.internal_errors=null===(n=e.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.errors);throw e},change:function(){this.onChange(this.state)},submit:function(){if(this.internal_errors=V(this.state,this.schema),!this.internal_errors)try{var e;null===(e=this.onSubmit(this.state))||void 0===e||e.catch(this.handleError)}catch(t){this.handleError(t)}}}};U.render=g;var L=U,P=(r("a4d3"),r("e01a"),{class:"input-wrapper"}),$={key:1,class:"form-error"},I={key:2,class:"description"};function R(e,t,r,a,i,c){return"ur-hidden"!==r.field.ui.tagName?(Object(n["q"])(),Object(n["d"])("div",{key:0,class:c.css.root},[c.showLabel(r.field)?(Object(n["q"])(),Object(n["d"])("label",{key:0,for:r.field.id},Object(n["z"])(r.field.title),9,["for"])):Object(n["e"])("",!0),Object(n["g"])("div",P,[(Object(n["q"])(),Object(n["d"])(Object(n["x"])(r.field.ui.tagName),{field:r.field,modelValue:r.modelValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.$emit("update:modelValue",t)})},null,8,["field","modelValue"]))]),c.error?(Object(n["q"])(),Object(n["d"])("div",$,Object(n["z"])(c.error),1)):r.field.description?(Object(n["q"])(),Object(n["d"])("div",I,Object(n["z"])(r.field.description),1)):Object(n["e"])("",!0)],2)):Object(n["e"])("",!0)}var J={inject:["ur_form"],props:{field:Object,form:Object,modelValue:null,change:Function},computed:{error:function(){var e;return null===(e=this.ur_form.internal_errors)||void 0===e?void 0:e[this.field.__path.join(".")]},css:function(){return{root:["form-group form-group__".concat(this.field.name),{"-error":this.error}]}}},methods:{showLabel:function(e){return e.title&&"__root"!==e.name&&!["ur-checkbox"].includes(e.ui.tagName)}}};J.render=R;var T=J;function M(e,t,r,a,i,c){return Object(n["q"])(),Object(n["d"])("label",{class:c.css},[Object(n["g"])("input",{type:"checkbox",id:r.field.id,checked:r.modelValue,onInput:t[1]||(t[1]=function(){return c.onChange&&c.onChange.apply(c,arguments)})},null,40,["id","checked"]),Object(n["f"])(" "+Object(n["z"])(r.field.title),1)],2)}var D={props:{modelValue:null,field:Object},emits:["update:modelValue"],computed:{mixed:function(){return"mixed"===this.modelValue},css:function(){var e=this.mixed,t=this.field.disabled;return[this.field.ui.css,"ur-checkbox -"+this.icon,{"-mixed":e,"-disabled":t}]},icon:function(){return this.mixed?"indeterminate":this.modelValue?"checked":"unchecked"}},methods:{onChange:function(){this.field.disabled||this.$emit("update:modelValue",!this.modelValue)}}};D.render=M;var B=D,Y=(r("1276"),{key:0,class:"original"}),Z={class:"name"},G={key:1,class:"preview"},H={class:"name"},K={key:2,class:"btn -primary"};function Q(e,t,r,a,i,c){return Object(n["q"])(),Object(n["d"])("label",{for:r.field.id,class:c.css},[Object(n["g"])("input",{style:{display:"none"},type:"file",id:r.field.id,onChange:t[1]||(t[1]=function(){return c.onChange&&c.onChange.apply(c,arguments)}),ref:"input"},null,40,["id"]),i.original?(Object(n["q"])(),Object(n["d"])("div",Y,[Object(n["g"])("img",{src:i.original},null,8,["src"]),Object(n["g"])("div",Z,Object(n["z"])(i.original.split("/").pop()),1)])):Object(n["e"])("",!0),i.preview?(Object(n["q"])(),Object(n["d"])("div",G,[Object(n["g"])("img",{src:i.preview.dataURL},null,8,["src"]),Object(n["g"])("div",H,[Object(n["f"])(Object(n["z"])(i.preview.name)+" ",1),i.preview?(Object(n["q"])(),Object(n["d"])("button",{key:0,onClick:t[2]||(t[2]=Object(n["F"])((function(){return c.clear&&c.clear.apply(c,arguments)}),["prevent"]))},"Clear")):Object(n["e"])("",!0)])])):(Object(n["q"])(),Object(n["d"])("div",K," Choose File "))],10,["for"])}var W={props:{modelValue:null,field:Object},emits:["update:modelValue"],data:function(){return{preview:null,original:this.modelValue}},computed:{css:function(){var e,t;return[null===(e=this.field)||void 0===e||null===(t=e.ui)||void 0===t?void 0:t.css,"ur-file"]}},methods:{clear:function(){this.$refs.input.value=null,this.preview=null},onChange:function(){var e=this,t=this.$refs.input.files[0],r=new FileReader;r.addEventListener("load",(function(){e.preview={dataURL:r.result,name:t.name},e.$emit("update:modelValue",e.preview)}),!1),t&&r.readAsDataURL(t)}}};W.render=Q;var X=W;function ee(e,t,r,a,i,c){var o=Object(n["w"])("ur-field");return Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["u"])(c.children,(function(e){return Object(n["q"])(),Object(n["d"])(o,{key:e.id,field:e,modelValue:r.modelValue[e.name],"onUpdate:modelValue":function(t){return r.modelValue[e.name]=t}},null,8,["field","modelValue","onUpdate:modelValue"])})),128)}r("d81d");var te={inject:["ur_form"],props:{field:Object,modelValue:Object},computed:{children:function(){var e=this;return Object.entries(this.field.properties).map((function(t){var r=Object(d["a"])(t,2),n=r[0],a=r[1];return E(n,a,e.ur_form,e.field.__path)}))}}};te.render=ee;var re=te,ne={class:"ur-range"},ae={class:"ur-range__value"};function ie(e,t,r,a,i,c){return Object(n["q"])(),Object(n["d"])("div",ne,[Object(n["g"])("input",Object(n["l"])({type:"range"},c.inputAttrs,{onInput:t[1]||(t[1]=function(){return c.change&&c.change.apply(c,arguments)}),onChange:t[2]||(t[2]=function(){return c.change&&c.change.apply(c,arguments)}),value:r.modelValue}),null,16,["value"]),Object(n["g"])("div",ae,Object(n["z"])(r.modelValue),1)])}r("a9e3");var ce=r("88bc"),oe=r.n(ce),ue={props:{field:Object,modelValue:Number},emits:["update:modelValue"],computed:{inputAttrs:function(){return oe()(this.field.ui,["min","max","step"])}},methods:{change:function(e){this.$emit("update:modelValue",Number(e.target.value))}}};ue.render=ie;var le=ue;function se(e,t,r,a,i,c){return Object(n["q"])(),Object(n["d"])("select",{onInput:t[1]||(t[1]=function(){return c.onChange&&c.onChange.apply(c,arguments)}),value:r.modelValue,id:r.field.id,class:"form-control"},[(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["u"])(c.choices,(function(e){return Object(n["q"])(),Object(n["d"])("option",{value:e.value,key:e.name},Object(n["z"])(e.name),9,["value"])})),128))],40,["value","id"])}var de={props:{modelValue:null,field:Object,form:Object},emits:["update:modelValue"],computed:{choices:function(){if(this.field.getChoices)return this.field.getChoices();var e=this.field.enumNames||this.field.enum;return this.field.enum.map((function(t,r){return{value:t,name:e[r]}}))}},methods:{onChange:function(e){this.$emit("update:modelValue",e.target.value)}}};de.render=se;var fe=de;function pe(e,t,r,a,i,c){return Object(n["q"])(),Object(n["d"])("input",Object(n["l"])(c.inputAttrs,{onInput:t[1]||(t[1]=function(){return c.onChange&&c.onChange.apply(c,arguments)}),class:"form-control"}),null,16)}var be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"===t.type?""===e?NaN:Number(e):e},me={props:{modelValue:null,field:Object},emits:["update:modelValue"],data:function(){return{showError:!1}},computed:{inputAttrs:function(){var e=oe()(this.field,["name","disabled","placeholder","id"]);return e.value=this.modelValue,e.type=this.field.ui.type,e.class="form-control",e}},methods:{onChange:function(e){var t=be(e.target.value,this.field);"number"===this.field.type&&isNaN(t)||this.$emit("update:modelValue",t)}}};me.render=pe;var he=me,je={Form:L,Field:T,Checkbox:B,Image:X,Object:re,Range:le,Select:fe,Text:he},Oe="Ur",ve={install:function(e){Object.entries(je).forEach((function(t){var r=Object(d["a"])(t,2),n=r[0],a=r[1];return e.component(Oe+n,a)}))}},ge=Object(j["a"])(Object(j["a"])({prepField:E,parseLazySchema:F,plugin:ve},je),{},{install:function(e){console.warn("DEPRACATED: Use UrForm.plugin"),e.use(ve)}}),ye=(r("4945"),{class:"playground-form"}),_e={class:"playground-form__schema"},we=Object(n["g"])("div",null,"Form schema",-1),Ve={key:0,class:"alert alert-danger"},qe={class:"playground-form__form"},xe=Object(n["g"])("div",null,"Form",-1),ke={key:0,class:"playground-result"},Ce=Object(n["g"])("div",null,"Form State",-1),ze={class:"playground-result__body"},Se={key:1,class:"playgroup-result"},Fe=Object(n["g"])("div",null,"Resulting schema",-1);function Ne(e,t,r,a,i,c){var o=Object(n["w"])("ur-form");return Object(n["q"])(),Object(n["d"])("div",ye,[Object(n["g"])("div",_e,[we,i.error?(Object(n["q"])(),Object(n["d"])("div",Ve,Object(n["z"])(i.error.message),1)):Object(n["e"])("",!0),Object(n["E"])(Object(n["g"])("textarea",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.text_schema=e})},null,512),[[n["B"],i.text_schema]])]),Object(n["g"])("div",qe,[xe,Object(n["g"])(o,Object(n["l"])(c.form_attrs,{onInput:c.sync,onChange:c.sync}),null,16,["onInput","onChange"])]),r.panels.includes("state")?(Object(n["q"])(),Object(n["d"])("div",ke,[Ce,Object(n["g"])("div",ze,Object(n["z"])(i.text_state),1)])):Object(n["e"])("",!0),r.panels.includes("schema")?(Object(n["q"])(),Object(n["d"])("div",Se,[Fe,Object(n["g"])("pre",null,Object(n["z"])(c.parsed_schema),1)])):Object(n["e"])("",!0)])}var Ae={props:{schema:Object,state:{type:Object,default:function(){return{}}},panels:{type:Array,default:function(){return["editor","form","state"]}}},data:function(){var e=JSON.stringify(this.schema,null,4);return{text_schema:e,current_schema:this.schema,error:null,text_state:null}},computed:{parsed_schema:function(){return JSON.stringify(ge.prepField("__root",this.current_schema),null,4)},form_attrs:function(){var e=this.current_schema,t=this.state;return{schema:e,state:t}}},mounted:function(){this.sync()},watch:{text_schema:"sync"},methods:{sync:function(){this.error=null;try{var e=JSON.parse(this.text_schema);ge.prepField("__root",e),this.current_schema=e}catch(t){window.E=t,this.error=t}this.text_state=JSON.stringify(this.state,null,2)}}};Ae.render=Ne;var Ee=Ae,Ue=(r("adcf"),r("6c02"));function Le(e,t,r,a,i,c){var o=Object(n["w"])("playground-form");return Object(n["q"])(),Object(n["d"])(o,{schema:i.schema,panels:["editor","form","state","schema"]},null,8,["schema"])}var Pe={type:"object",required:["name"],properties:{name:{type:"text"},age:{type:"number"},color:{type:"text",enum:["red","green","blue"]},colorPicker:{type:"text",format:"color"},newsletter:{type:"boolean",title:"Sign up for our newsletter"},avatar:{type:"image",title:"Avatar",default:"https://i.imgur.com/YSPe6yA.jpg"},hidden:{type:"string",title:"Shouldn't see me",default:"Foo",ui:{tagName:"ur-hidden"}},password:{type:"string",default:"I am a password field"},password_hint:{type:"string",default:"I am not a password field",ui:{type:"text"}},address:{type:"object",required:["street"],properties:{street:{type:"string"},city:{type:"string"}}}}},$e={type:"lazy",name:"Unknown",quantity:1,accept_terms_and_conditions:!0},Ie={basics:Pe,lazy:$e},Re={data:function(){return{schema:Ie.basics}}};Re.render=Le;var Je=Re,Te=Object(n["g"])("p",null,[Object(n["f"])(" An field with "),Object(n["g"])("code",null,"type='lazy'"),Object(n["f"])(" will be interpreted as a map of defaults. This is useful for rapid prototyping, but other than unsligifying the field name for title, no further configuration can be done. ")],-1);function Me(e,t,r,a,i,c){var o=Object(n["w"])("playground-form");return Object(n["q"])(),Object(n["d"])("div",null,[Te,Object(n["g"])(o,{schema:i.schema,panels:["editor","schema","form"]},null,8,["schema"])])}var De={data:function(){return{schema:Ie.lazy}}};De.render=Me;var Be=De,Ye=Object(Ue["b"])(),Ze=[{path:"/",component:Je},{path:"/Lazy",component:Be}],Ge=Object(Ue["a"])({history:Ye,routes:Ze}),He=Object(n["c"])(h);He.use(Ge),He.use(ge.plugin),He.component("PlaygroundForm",Ee),He.mount("#app")},adcf:function(e,t,r){}});
//# sourceMappingURL=app.8580be71.js.map