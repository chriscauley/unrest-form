(function(e){function t(t){for(var r,c,o=t[0],u=t[1],l=t[2],d=0,p=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);s&&s(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},i=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/unrest-form/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var s=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},4945:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a={class:"unrest-app-root"};function i(e,t,n,i,c,o){var u=Object(r["w"])("app-nav"),l=Object(r["w"])("router-view");return Object(r["q"])(),Object(r["d"])("div",a,[Object(r["g"])(u),Object(r["g"])(l)])}var c={class:"navbar"},o=Object(r["g"])("div",{class:"navbar-brand"},"@unrest/form",-1),u={class:"navbar-section flex items-center"},l=Object(r["g"])("a",{href:"http://github.com/chriscauley/unrest-form",class:"btn -light"},[Object(r["g"])("i",{class:"fa fa-github fa-2x"})],-1);function s(e,t,n,a,i,s){var d=Object(r["w"])("router-link");return Object(r["q"])(),Object(r["d"])("header",c,[o,Object(r["g"])("div",u,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["u"])(i.tabs,(function(e){return Object(r["q"])(),Object(r["d"])("div",{class:s.css.tab(e),key:e[0]},[Object(r["g"])(d,{to:e[0]},{default:Object(r["D"])((function(){return[Object(r["f"])(Object(r["z"])(e[1]),1)]})),_:2},1032,["to"])],2)})),128)),l])])}var d=n("3835"),p=[["/","Basics"],["/lazy/","Lazy"],["/misc/","Misc"]],b={data:function(){return{tabs:p}},computed:{css:function(){var e=this;return{tab:function(t){var n=Object(d["a"])(t,1),r=n[0];return["btn",r===e.$route.path?"-primary":"-light"]}}}}};b.render=s;var f=b,m={components:{AppNav:f}};m.render=i;var h=m,j=n("5530"),O=(n("159b"),n("4fad"),{class:"ur-form__actions"}),v=Object(r["g"])("button",{type:"submit",class:"btn -primary"},"Submit",-1);function g(e,t,n,a,i,c){var o,u=Object(r["w"])("unrest-field");return Object(r["q"])(),Object(r["d"])("form",{onSubmit:t[2]||(t[2]=Object(r["F"])((function(){return c.submit&&c.submit.apply(c,arguments)}),["prevent"])),class:"ur-form"},[Object(r["g"])(u,{modelValue:n.state,"onUpdate:modelValue":t[1]||(t[1]=function(e){return n.state=e}),field:c.field,key:c.field.id,onChange:c.change,onInput:c.input},null,8,["modelValue","field","onChange","onInput"]),(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["u"])(null===(o=c.computed_errors)||void 0===o?void 0:o.__root,(function(e,t){return Object(r["q"])(),Object(r["d"])("div",{key:t,class:"form-error"},Object(r["z"])(e.message),1)})),128)),Object(r["g"])("div",O,[Object(r["v"])(e.$slots,"actions",{},(function(){return[v]}))])],32)}var y=n("2909"),_=(n("b64b"),n("b0c0"),n("99af"),n("a15b"),n("a41b")),w=function e(t){var n={};return Object.entries(t).forEach((function(t){var r=Object(d["a"])(t,2),a=r[0],i=r[1];if(void 0!==i&&null!==i&&""!==i)if(i.constructor===Object){var c=e(i);Object.keys(c).length>0&&(n[a]=c)}else n[a]=i})),n},V=function(e,t){var n=new _["Validator"],r=n.validate(w(e),t);if(!r.errors.length)return null;var a={};return r.errors.forEach((function(e){var t=e.path,n=e.argument,r=e.message,i=e.name;t=[].concat(Object(y["a"])(t),[n]),a[t.join(".")]="required"===i?"This field is required.":r})),a},q=function e(t,n){return"object"===n.type?(t=t||{},Object.entries(n.properties).forEach((function(n){var r=Object(d["a"])(n,2),a=r[0],i=r[1];t[a]=e(t[a],i)})),t):t||n.default},x=q,k=(n("caad"),n("2532"),n("fb6a"),n("ac1f"),n("5319"),{toSentenceCase:function(e){return e=e.replace(/([A-Z])/g," $1").toLowerCase().replace(/_/g," "),e[0].toUpperCase()+e.slice(1)}}),C=n("53ca"),z=["number","string","boolean"],S=function e(t){if(null===t||void 0===t)return{};for(var n=0;n<z.length;n++)if(Object(C["a"])(t)===z[n])return{default:t,type:z[n]};if(Array.isArray(t))return{type:"array",default:t,items:e(t[0])};if("lazy"===t.type){var r={};return Object.entries(t).forEach((function(t){var n=Object(d["a"])(t,2),a=n[0],i=n[1];return r[a]=e(i)})),delete r.type,{type:"object",properties:r}}if(t.type)return t;throw"Unrecognized schema object for parseLazySchema"},F=S,N=function(e){return"object"===e.type?"unrest-object":e.enum?"unrest-select":"boolean"===e.type?"unrest-checkbox":"image"===e.type?"unrest-image":"color"===e.format?"unrest-color":"unrest-text"},A=function(e,t){var n={type:"text",tagName:N(e)};return"number"===e.type&&(n.type="number"),e.name.includes("password")&&(n.type="password"),Object.assign(n,t[e.name],e.ui)},E=function(e,t){var n=Object.assign({},t),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.ui,i=void 0===a?{}:a,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return"lazy"===n.type&&(n=F(n)),n.name=e,n.id="id__".concat(n.name),n.ui=A(n,i),void 0===n.title&&(n.title=k.toSentenceCase(n.name)),n.__path=c.slice(),"__root"!==e&&n.__path.push(n.name),n},U={provide:function(){return{ur_form:this}},props:{schema:Object,uiSchema:Object,state:{type:Object,default:function(){return{}}},onSubmit:Function,onChange:Function,onInput:Function,errors:Object},data:function(){return{internal_errors:null}},computed:{computed_errors:function(){var e=Object(j["a"])(Object(j["a"])({},this.errors),this.internal_errors);return e.__all__&&(e.__root=e.__all__),e},field:function(){return E("__root",this.schema)}},beforeMount:function(){x(this.state,this.field)},methods:{handleError:function(e){var t,n,r,a;(e.message&&(this.internal_errors={__root:e.message||e}),null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.errors)&&(this.internal_errors=null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.errors);throw e},change:function(e){var t;null===(t=this.onChange)||void 0===t||t.call(this,this.state,e)},input:function(e){var t;null===(t=this.onInput)||void 0===t||t.call(this,this.state,e)},submit:function(){if(this.internal_errors=V(this.state,this.schema),!this.internal_errors)try{var e;null===(e=this.onSubmit(this.state))||void 0===e||e.catch(this.handleError)}catch(t){this.handleError(t)}}}};U.render=g;var I=U,P=(n("a4d3"),n("e01a"),{class:"input-wrapper"}),$={key:1,class:"form-error"},L={key:2,class:"description"};function J(e,t,n,a,i,c){return"unrest-hidden"!==n.field.ui.tagName?(Object(r["q"])(),Object(r["d"])("div",{key:0,class:c.css.root},[c.showLabel(n.field)?(Object(r["q"])(),Object(r["d"])("label",{key:0,for:n.field.id},Object(r["z"])(n.field.title),9,["for"])):Object(r["e"])("",!0),Object(r["g"])("div",P,[(Object(r["q"])(),Object(r["d"])(Object(r["x"])(n.field.ui.tagName),{field:n.field,modelValue:n.modelValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.$emit("update:modelValue",t)})},null,8,["field","modelValue"]))]),c.error?(Object(r["q"])(),Object(r["d"])("div",$,Object(r["z"])(c.error),1)):n.field.description?(Object(r["q"])(),Object(r["d"])("div",L,Object(r["z"])(n.field.description),1)):Object(r["e"])("",!0)],2)):Object(r["e"])("",!0)}var R={inject:["ur_form"],props:{field:Object,form:Object,modelValue:null},computed:{error:function(){var e;return null===(e=this.ur_form.internal_errors)||void 0===e?void 0:e[this.field.__path.join(".")]},css:function(){return{root:["form-group form-group__".concat(this.field.name),{"-error":this.error}]}}},methods:{showLabel:function(e){return e.title&&"__root"!==e.name&&!["unrest-checkbox"].includes(e.ui.tagName)}}};R.render=J;var M=R;function T(e,t,n,a,i,c){return Object(r["q"])(),Object(r["d"])("label",{class:c.css},[Object(r["g"])("input",{type:"checkbox",id:n.field.id,checked:n.modelValue,onInput:t[1]||(t[1]=function(){return c.onChange&&c.onChange.apply(c,arguments)}),name:n.field.name},null,40,["id","checked","name"]),Object(r["f"])(" "+Object(r["z"])(n.field.title),1)],2)}var D={props:{modelValue:null,field:Object},emits:["update:modelValue"],computed:{mixed:function(){return"mixed"===this.modelValue},css:function(){var e=this.mixed,t=this.field.disabled;return[this.field.ui.css,"ur-checkbox -"+this.icon,{"-mixed":e,"-disabled":t}]},icon:function(){return this.mixed?"indeterminate":this.modelValue?"checked":"unchecked"}},methods:{onChange:function(){this.field.disabled||this.$emit("update:modelValue",!this.modelValue)}}};D.render=T;var B=D,Y=(n("1276"),{key:0,class:"original"}),Z={class:"name"},G={key:1,class:"preview"},H={class:"name"},K={key:2,class:"btn -primary"};function Q(e,t,n,a,i,c){return Object(r["q"])(),Object(r["d"])("label",{for:n.field.id,class:c.css},[Object(r["g"])("input",{style:{display:"none"},type:"file",id:n.field.id,onChange:t[1]||(t[1]=function(){return c.onChange&&c.onChange.apply(c,arguments)}),ref:"input"},null,40,["id"]),i.original?(Object(r["q"])(),Object(r["d"])("div",Y,[Object(r["g"])("img",{src:i.original},null,8,["src"]),Object(r["g"])("div",Z,Object(r["z"])(i.original.split("/").pop()),1)])):Object(r["e"])("",!0),i.preview?(Object(r["q"])(),Object(r["d"])("div",G,[Object(r["g"])("img",{src:i.preview.dataURL},null,8,["src"]),Object(r["g"])("div",H,[Object(r["f"])(Object(r["z"])(i.preview.name)+" ",1),i.preview?(Object(r["q"])(),Object(r["d"])("button",{key:0,onClick:t[2]||(t[2]=Object(r["F"])((function(){return c.clear&&c.clear.apply(c,arguments)}),["prevent"]))},"Clear")):Object(r["e"])("",!0)])])):(Object(r["q"])(),Object(r["d"])("div",K," Choose File "))],10,["for"])}var W={props:{modelValue:null,field:Object},emits:["update:modelValue"],data:function(){return{preview:null,original:this.modelValue}},computed:{css:function(){var e,t;return[null===(e=this.field)||void 0===e||null===(t=e.ui)||void 0===t?void 0:t.css,"ur-file"]}},methods:{clear:function(){this.$refs.input.value=null,this.preview=null},onChange:function(){var e=this,t=this.$refs.input.files[0],n=new FileReader;n.addEventListener("load",(function(){e.preview={dataURL:n.result,name:t.name},e.$emit("update:modelValue",e.preview)}),!1),t&&n.readAsDataURL(t)}}};W.render=Q;var X=W;function ee(e,t,n,a,i,c){var o=Object(r["w"])("unrest-field");return Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["u"])(c.children,(function(e){return Object(r["q"])(),Object(r["d"])(o,{key:e.id,field:e,modelValue:n.modelValue[e.name],"onUpdate:modelValue":function(t){return n.modelValue[e.name]=t}},null,8,["field","modelValue","onUpdate:modelValue"])})),128)}n("d81d");var te={inject:["ur_form"],props:{field:Object,modelValue:Object},computed:{children:function(){var e=this;return Object.entries(this.field.properties).map((function(t){var n=Object(d["a"])(t,2),r=n[0],a=n[1];return E(r,a,e.ur_form,e.field.__path)}))}}};te.render=ee;var ne=te,re={class:"ur-range"},ae={class:"ur-range__value"};function ie(e,t,n,a,i,c){return Object(r["q"])(),Object(r["d"])("div",re,[Object(r["g"])("input",Object(r["l"])({type:"range"},c.inputAttrs,{onInput:t[1]||(t[1]=function(){return c.change&&c.change.apply(c,arguments)}),onChange:t[2]||(t[2]=function(){return c.change&&c.change.apply(c,arguments)}),value:n.modelValue}),null,16,["value"]),Object(r["g"])("div",ae,Object(r["z"])(n.modelValue),1)])}n("a9e3");var ce=n("88bc"),oe=n.n(ce),ue={props:{field:Object,modelValue:Number},emits:["update:modelValue"],computed:{inputAttrs:function(){return oe()(this.field.ui,["min","max","step"])}},methods:{change:function(e){this.$emit("update:modelValue",Number(e.target.value))}}};ue.render=ie;var le=ue;function se(e,t,n,a,i,c){return Object(r["q"])(),Object(r["d"])("select",{onInput:t[1]||(t[1]=function(){return c.onChange&&c.onChange.apply(c,arguments)}),value:n.modelValue,id:n.field.id,class:"form-control"},[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["u"])(c.choices,(function(e){return Object(r["q"])(),Object(r["d"])("option",{value:e.value,key:e.name},Object(r["z"])(e.name),9,["value"])})),128))],40,["value","id"])}var de={props:{modelValue:null,field:Object,form:Object},emits:["update:modelValue"],computed:{choices:function(){if(this.field.getChoices)return this.field.getChoices();var e=this.field.enumNames||this.field.enum;return this.field.enum.map((function(t,n){return{value:t,name:e[n]}}))}},methods:{onChange:function(e){this.$emit("update:modelValue",e.target.value)}}};de.render=se;var pe=de;function be(e,t,n,a,i,c){return Object(r["q"])(),Object(r["d"])("input",Object(r["l"])(c.inputAttrs,{onInput:t[1]||(t[1]=function(){return c.onChange&&c.onChange.apply(c,arguments)}),class:"form-control"}),null,16)}var fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"===t.type?""===e?NaN:Number(e):e},me={props:{modelValue:null,field:Object},emits:["update:modelValue"],data:function(){return{showError:!1}},computed:{inputAttrs:function(){var e=oe()(this.field,["name","disabled","placeholder","id"]);return e.value=this.modelValue,e.type=this.field.ui.type,e.class="form-control",e}},methods:{onChange:function(e){var t=fe(e.target.value,this.field);"number"===this.field.type&&isNaN(t)||this.$emit("update:modelValue",t)}}};me.render=be;var he=me,je={Form:I,Field:M,Checkbox:B,Image:X,Object:ne,Range:le,Select:pe,Text:he},Oe="Unrest",ve={install:function(e){Object.entries(je).forEach((function(t){var n=Object(d["a"])(t,2),r=n[0],a=n[1];return e.component(Oe+r,a)}))}},ge=Object(j["a"])(Object(j["a"])({prepField:E,parseLazySchema:F,plugin:ve},je),{},{install:function(e){console.warn("DEPRACATED: Use UrForm.plugin"),e.use(ve)}}),ye=(n("4945"),{class:"playground-form"}),_e={class:"playground-form__schema"},we=Object(r["g"])("div",null,"Form schema",-1),Ve={key:0,class:"alert alert-danger"},qe={class:"playground-form__form"},xe=Object(r["g"])("div",null,"Form",-1),ke={key:0,class:"playground-result"},Ce=Object(r["g"])("div",null,"Form State",-1),ze={class:"playground-result__body"},Se={key:1,class:"playground-result"},Fe=Object(r["g"])("div",null,"Resulting schema",-1),Ne={class:"playground-form"},Ae={class:"playgroud-result"},Ee=Object(r["g"])("div",null,"Events",-1),Ue={key:0,class:"pill pill-primary"};function Ie(e,t,n,a,i,c){var o=Object(r["w"])("unrest-form");return Object(r["q"])(),Object(r["d"])(r["a"],null,[Object(r["g"])("div",ye,[Object(r["g"])("div",_e,[we,i.error?(Object(r["q"])(),Object(r["d"])("div",Ve,Object(r["z"])(i.error.message),1)):Object(r["e"])("",!0),Object(r["E"])(Object(r["g"])("textarea",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.text_schema=e})},null,512),[[r["B"],i.text_schema]])]),Object(r["g"])("div",qe,[xe,Object(r["g"])(o,Object(r["l"])(c.form_attrs,{onInput:c.input,onChange:c.change,onSubmit:c.submit}),null,16,["onInput","onChange","onSubmit"])]),n.panels.includes("state")?(Object(r["q"])(),Object(r["d"])("div",ke,[Ce,Object(r["g"])("div",ze,Object(r["z"])(i.text_state),1)])):Object(r["e"])("",!0),n.panels.includes("schema")?(Object(r["q"])(),Object(r["d"])("div",Se,[Fe,Object(r["g"])("pre",null,Object(r["z"])(c.parsed_schema),1)])):Object(r["e"])("",!0)]),Object(r["g"])("div",Ne,[Object(r["g"])("div",Ae,[Ee,Object(r["g"])("ul",null,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["u"])(i.events,(function(e,t){return Object(r["q"])(),Object(r["d"])("li",{key:t,class:"playground-log__event"},[Object(r["g"])("div",null,Object(r["z"])(e.message),1),e.count?(Object(r["q"])(),Object(r["d"])("div",Ue,Object(r["z"])(e.count),1)):Object(r["e"])("",!0)])})),128))])])])],64)}var Pe={props:{schema:Object,state:{type:Object,default:function(){return{}}},panels:{type:Array,default:function(){return["editor","form","state"]}}},data:function(){var e=JSON.stringify(this.schema,null,4);return{text_schema:e,current_schema:this.schema,error:null,text_state:null,events:[]}},computed:{parsed_schema:function(){return JSON.stringify(ge.prepField("__root",this.current_schema),null,4)},form_attrs:function(){var e=this.current_schema,t=this.state;return{schema:e,state:t}}},mounted:function(){this.sync()},watch:{text_schema:"sync"},methods:{log:function(e){var t=this.events[this.events.length-1];(null===t||void 0===t?void 0:t.message)===e.message?t.count=(t.count||0)+1:this.events.push(e),this.sync()},input:function(e,t){this.log({type:"input",message:"input@".concat(t.target.name)})},change:function(e,t){this.log({type:"change",message:"change@".concat(t.target.name)})},submit:function(){this.log({type:"submit",message:"submit"})},sync:function(){this.error=null;try{var e=JSON.parse(this.text_schema);ge.prepField("__root",e),this.current_schema=e}catch(t){window.E=t,this.error=t}this.text_state=JSON.stringify(this.state,null,2)}}};Pe.render=Ie;var $e=Pe,Le=(n("adcf"),n("6c02"));function Je(e,t,n,a,i,c){var o=Object(r["w"])("playground-form");return Object(r["q"])(),Object(r["d"])(o,{schema:i.schema,panels:["editor","form","state","schema"]},null,8,["schema"])}var Re={type:"object",required:["name"],properties:{name:{type:"text"},age:{type:"number"},color:{type:"text",enum:["red","green","blue"]},colorPicker:{type:"text",format:"color"},newsletter:{type:"boolean",title:"Sign up for our newsletter"},avatar:{type:"image",title:"Avatar",default:"https://i.imgur.com/YSPe6yA.jpg"},hidden:{type:"string",title:"Shouldn't see me",default:"Foo",ui:{tagName:"unrest-hidden"}},password:{type:"string",default:"I am a password field"},password_hint:{type:"string",default:"I am not a password field",ui:{type:"text"}},address:{type:"object",required:["street"],properties:{street:{type:"string"},city:{type:"string"}}}}},Me={type:"lazy",name:"Unknown",quantity:1,accept_terms_and_conditions:!0},Te={type:"lazy",last_name:{type:"string",description:"title=undefined will guess a title from name"},first_name:{type:"string",title:null,description:"title=null will show no title"},terms_and_conditions:!0},De={basics:Re,lazy:Me,misc:Te},Be={data:function(){return{schema:De.basics}}};Be.render=Je;var Ye=Be,Ze=Object(r["g"])("p",null,[Object(r["f"])(" An field with "),Object(r["g"])("code",null,"type='lazy'"),Object(r["f"])(" will be interpreted as a map of defaults. This is useful for rapid prototyping, but other than unsligifying the field name for title, no further configuration can be done. ")],-1);function Ge(e,t,n,a,i,c){var o=Object(r["w"])("playground-form");return Object(r["q"])(),Object(r["d"])("div",null,[Ze,Object(r["g"])(o,{schema:i.schema,panels:["editor","schema","form"]},null,8,["schema"])])}var He={data:function(){return{schema:De.lazy}}};He.render=Ge;var Ke=He,Qe=Object(r["g"])("p",null," Just me testing out features. Please ignore. ",-1);function We(e,t,n,a,i,c){var o=Object(r["w"])("playground-form");return Object(r["q"])(),Object(r["d"])("div",null,[Qe,Object(r["g"])(o,{schema:i.schema,panels:["editor","form","state","schema"]},null,8,["schema"])])}var Xe={data:function(){return{schema:De.misc}}};Xe.render=We;var et=Xe,tt=Object(Le["b"])(),nt=[{path:"/",component:Ye},{path:"/lazy",component:Ke},{path:"/misc",component:et}],rt=Object(Le["a"])({history:tt,routes:nt}),at=Object(r["c"])(h);at.use(rt),at.use(ge.plugin),at.component("PlaygroundForm",$e),at.mount("#app")},adcf:function(e,t,n){}});
//# sourceMappingURL=app.2e353a35.js.map