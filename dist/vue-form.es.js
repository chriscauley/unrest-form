var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,l=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&i(e,r,t[r]);if(n)for(var r of n(t))a.call(t,r)&&i(e,r,t[r]);return e};import{reactive as u,resolveComponent as s,openBlock as c,createBlock as d,withModifiers as p,createVNode as f,Fragment as h,renderList as m,toDisplayString as v,renderSlot as y,createCommentVNode as b,resolveDynamicComponent as _,createTextVNode as g,withDirectives as j,mergeProps as w,vModelText as O,vModelDynamic as V}from"vue";import{validate as k}from"jsonschema";const C=e=>{const t={};return Object.entries(e).forEach((([e,r])=>{if(null==r||""===r)return;if(r.constructor!==Object)return void(t[e]=r);const n=C(r);Object.keys(n).length>0&&(t[e]=n)})),t};const A=(e,t)=>{if("object"===t.type){const r=e||{};return Object.entries(t.properties).forEach((([e,n])=>{var o;const a=A((null==(o=t.default)?void 0:o[e])||r[e],n);void 0!==a&&(r[e]=a)})),r}return e=e||t.default,["integer","number"].includes(t.type)?isNaN(Number(e))?e:Number(e):e};var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},E={exports:{}};!function(e,t){var r="__lodash_hash_undefined__",n=9007199254740991,o="[object Arguments]",a="[object Boolean]",i="[object Date]",l="[object Function]",u="[object GeneratorFunction]",s="[object Map]",c="[object Number]",d="[object Object]",p="[object Promise]",f="[object RegExp]",h="[object Set]",m="[object String]",v="[object Symbol]",y="[object WeakMap]",b="[object ArrayBuffer]",_="[object DataView]",g="[object Float32Array]",j="[object Float64Array]",w="[object Int8Array]",O="[object Int16Array]",V="[object Int32Array]",k="[object Uint8Array]",C="[object Uint8ClampedArray]",A="[object Uint16Array]",E="[object Uint32Array]",$=/\w*$/,S=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,U={};U[o]=U["[object Array]"]=U[b]=U[_]=U[a]=U[i]=U[g]=U[j]=U[w]=U[O]=U[V]=U[s]=U[c]=U[d]=U[f]=U[h]=U[m]=U[v]=U[k]=U[C]=U[A]=U[E]=!0,U["[object Error]"]=U[l]=U[y]=!1;var F="object"==typeof x&&x&&x.Object===Object&&x,N="object"==typeof self&&self&&self.Object===Object&&self,P=F||N||Function("return this")(),L=t&&!t.nodeType&&t,R=L&&e&&!e.nodeType&&e,T=R&&R.exports===L;function B(e,t){return e.set(t[0],t[1]),e}function D(e,t){return e.add(t),e}function z(e,t,r,n){var o=-1,a=e?e.length:0;for(n&&a&&(r=e[++o]);++o<a;)r=t(r,e[o],o,e);return r}function M(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(r){}return t}function q(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function W(e,t){return function(r){return e(t(r))}}function G(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var H,Z=Array.prototype,J=Function.prototype,K=Object.prototype,Q=P["__core-js_shared__"],X=(H=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",Y=J.toString,ee=K.hasOwnProperty,te=K.toString,re=RegExp("^"+Y.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=T?P.Buffer:void 0,oe=P.Symbol,ae=P.Uint8Array,ie=W(Object.getPrototypeOf,Object),le=Object.create,ue=K.propertyIsEnumerable,se=Z.splice,ce=Object.getOwnPropertySymbols,de=ne?ne.isBuffer:void 0,pe=W(Object.keys,Object),fe=Re(P,"DataView"),he=Re(P,"Map"),me=Re(P,"Promise"),ve=Re(P,"Set"),ye=Re(P,"WeakMap"),be=Re(Object,"create"),_e=Me(fe),ge=Me(he),je=Me(me),we=Me(ve),Oe=Me(ye),Ve=oe?oe.prototype:void 0,ke=Ve?Ve.valueOf:void 0;function Ce(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ae(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function xe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ee(e){this.__data__=new Ae(e)}function $e(e,t){var r=We(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ge(e)}(e)&&ee.call(e,"callee")&&(!ue.call(e,"callee")||te.call(e)==o)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,a=!!n;for(var i in e)!t&&!ee.call(e,i)||a&&("length"==i||De(i,n))||r.push(i);return r}function Se(e,t,r){var n=e[t];ee.call(e,t)&&qe(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function Ie(e,t){for(var r=e.length;r--;)if(qe(e[r][0],t))return r;return-1}function Ue(e,t,r,n,p,y,x){var S;if(n&&(S=y?n(e,p,y,x):n(e)),void 0!==S)return S;if(!Je(e))return e;var I=We(e);if(I){if(S=function(e){var t=e.length,r=e.constructor(t);t&&"string"==typeof e[0]&&ee.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!t)return function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(e,S)}else{var F=Be(e),N=F==l||F==u;if(He(e))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(e,t);if(F==d||F==o||N&&!y){if(M(e))return y?e:{};if(S=function(e){return"function"!=typeof e.constructor||ze(e)?{}:(t=ie(e),Je(t)?le(t):{});var t}(N?{}:e),!t)return function(e,t){return Pe(e,Te(e),t)}(e,function(e,t){return e&&Pe(t,Ke(t),e)}(S,e))}else{if(!U[F])return y?e:{};S=function(e,t,r,n){var o=e.constructor;switch(t){case b:return Ne(e);case a:case i:return new o(+e);case _:return function(e,t){var r=t?Ne(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case g:case j:case w:case O:case V:case k:case C:case A:case E:return function(e,t){var r=t?Ne(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,n);case s:return function(e,t,r){return z(t?r(q(e),!0):q(e),B,new e.constructor)}(e,n,r);case c:case m:return new o(e);case f:return function(e){var t=new e.constructor(e.source,$.exec(e));return t.lastIndex=e.lastIndex,t}(e);case h:return function(e,t,r){return z(t?r(G(e),!0):G(e),D,new e.constructor)}(e,n,r);case v:return l=e,ke?Object(ke.call(l)):{}}var l}(e,F,Ue,t)}}x||(x=new Ee);var P=x.get(e);if(P)return P;if(x.set(e,S),!I)var L=r?function(e){return function(e,t,r){var n=t(e);return We(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,Ke,Te)}(e):Ke(e);return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););}(L||e,(function(o,a){L&&(o=e[a=o]),Se(S,a,Ue(o,t,r,n,a,e,x))})),S}function Fe(e){return!(!Je(e)||(t=e,X&&X in t))&&(Ze(e)||M(e)?re:S).test(Me(e));var t}function Ne(e){var t=new e.constructor(e.byteLength);return new ae(t).set(new ae(e)),t}function Pe(e,t,r,n){r||(r={});for(var o=-1,a=t.length;++o<a;){var i=t[o],l=n?n(r[i],e[i],i,r,e):void 0;Se(r,i,void 0===l?e[i]:l)}return r}function Le(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function Re(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Fe(r)?r:void 0}Ce.prototype.clear=function(){this.__data__=be?be(null):{}},Ce.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ce.prototype.get=function(e){var t=this.__data__;if(be){var n=t[e];return n===r?void 0:n}return ee.call(t,e)?t[e]:void 0},Ce.prototype.has=function(e){var t=this.__data__;return be?void 0!==t[e]:ee.call(t,e)},Ce.prototype.set=function(e,t){return this.__data__[e]=be&&void 0===t?r:t,this},Ae.prototype.clear=function(){this.__data__=[]},Ae.prototype.delete=function(e){var t=this.__data__,r=Ie(t,e);return!(r<0)&&(r==t.length-1?t.pop():se.call(t,r,1),!0)},Ae.prototype.get=function(e){var t=this.__data__,r=Ie(t,e);return r<0?void 0:t[r][1]},Ae.prototype.has=function(e){return Ie(this.__data__,e)>-1},Ae.prototype.set=function(e,t){var r=this.__data__,n=Ie(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},xe.prototype.clear=function(){this.__data__={hash:new Ce,map:new(he||Ae),string:new Ce}},xe.prototype.delete=function(e){return Le(this,e).delete(e)},xe.prototype.get=function(e){return Le(this,e).get(e)},xe.prototype.has=function(e){return Le(this,e).has(e)},xe.prototype.set=function(e,t){return Le(this,e).set(e,t),this},Ee.prototype.clear=function(){this.__data__=new Ae},Ee.prototype.delete=function(e){return this.__data__.delete(e)},Ee.prototype.get=function(e){return this.__data__.get(e)},Ee.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ae){var n=r.__data__;if(!he||n.length<199)return n.push([e,t]),this;r=this.__data__=new xe(n)}return r.set(e,t),this};var Te=ce?W(ce,Object):function(){return[]},Be=function(e){return te.call(e)};function De(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||I.test(e))&&e>-1&&e%1==0&&e<t}function ze(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||K)}function Me(e){if(null!=e){try{return Y.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function qe(e,t){return e===t||e!=e&&t!=t}(fe&&Be(new fe(new ArrayBuffer(1)))!=_||he&&Be(new he)!=s||me&&Be(me.resolve())!=p||ve&&Be(new ve)!=h||ye&&Be(new ye)!=y)&&(Be=function(e){var t=te.call(e),r=t==d?e.constructor:void 0,n=r?Me(r):void 0;if(n)switch(n){case _e:return _;case ge:return s;case je:return p;case we:return h;case Oe:return y}return t});var We=Array.isArray;function Ge(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!Ze(e)}var He=de||function(){return!1};function Ze(e){var t=Je(e)?te.call(e):"";return t==l||t==u}function Je(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ke(e){return Ge(e)?$e(e):function(e){if(!ze(e))return pe(e);var t=[];for(var r in Object(e))ee.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}e.exports=function(e){return Ue(e,!0,!0)}}(E,E.exports);var $=E.exports,S=e=>(e=e.replace(/([A-Z])/g," $1").toLowerCase().replace(/_/g," "))[0].toUpperCase()+e.slice(1);const I=["number","string","boolean"],U=e=>{if(null==e)return{};for(let t=0;t<I.length;t++)if(typeof e===I[t])return{default:e,type:I[t]};if(Array.isArray(e))return{type:"array",default:e,items:U(e[0])};if("lazy"===e.type){const t={};return Object.entries(e).forEach((([e,r])=>t[e]=U(r))),delete t.type,{type:"object",properties:t}}if(e.type)return e;throw"Unrecognized schema object for parseLazySchema"},F=e=>"hidden"===e.format||"HiddenInput"===e.__widget?"unrest-hidden":"date-time"===e.format?"unrest-date-time":"object"===e.type?"unrest-object":e.enum||e.getChoices?"unrest-select":"boolean"===e.type?"unrest-checkbox":"image"===e.type?"unrest-image":"password"===e.format?"unrest-password":"array"===e.type&&e.items.enum?"unrest-checkboxes":"unrest-text";var N=(e,t,{ui:r={}}={},n=[])=>("lazy"===(t=$(t)).type&&(t=U(t)),t.name=e,t.id=`id__${t.name}`,t.ui=((e,t)=>{const r={type:"text",tagName:F(e)};return"number"===e.type&&(r.type="number"),"password"===e.format&&(r.type="password"),"email"===e.format&&(r.type="email"),"color"===e.format&&(r.type="color"),Object.assign(r,t[e.name],e.ui)})(t,r),void 0===t.title&&(t.title=S(t.name)),t.__path=n.slice(),"__root"!==e&&t.__path.push(t.name),"object"===t.type&&t.default&&Object.entries(t.default).forEach((([e,r])=>{t.properties[e]&&!t.properties[e].default&&(t.properties[e].default=r)})),t);const P={provide(){return{ur_form:this}},props:{schema:Object,ui:Object,state:{type:Object,default:()=>u({})},onError:Function,onSubmit:Function,onChange:Function,onInput:Function,errors:Object,focus:{type:Boolean,default:()=>!0},onCancel:Function},emits:["error"],data:()=>({internal_errors:null,loading:!1}),computed:{computed_errors(){const e=l(l({},this.errors),this.internal_errors);return e.__all__&&(e.__root=e.__all__),e.__root&&!Array.isArray(e.__root)&&(e.__root=[e.__root]),e},prepped_schema(){return N("__root",this.schema)}},beforeMount(){A(this.state,this.prepped_schema)},mounted(){var e;this.focus&&(null==(e=this.$el.querySelector("input"))||e.focus())},methods:{setErrors(e){this.internal_errors=e,e&&this.$emit("error",e)},handleError(e){var t,r,n,o;throw this.loading=!1,e.message&&this.setErrors({__root:e.message||e}),(null==(r=null==(t=e.response)?void 0:t.data)?void 0:r.errors)&&this.setErrors(null==(o=null==(n=e.response)?void 0:n.data)?void 0:o.errors),e},change(e){var t;null==(t=this.onChange)||t.call(this,this.state,e)},input(e){var t;null==(t=this.onInput)||t.call(this,this.state,e)},submit(e){var t;if(!this.loading){if(this.setErrors(((e,t)=>{const r=k(C(e),t);if(!r.errors.length)return null;const n={};return r.errors.forEach((({path:e,argument:t,message:r,name:o})=>{e=[...e,t],n[e.join(".")]="required"===o?"This field is required.":r})),n})(this.state,this.prepped_schema)),this.internal_errors)return console.error(this.state),void console.error(this.internal_errors);try{this.loading=!0,Promise.resolve(null==(t=this.onSubmit)?void 0:t.call(this,this.state,e)).then((e=>(this.loading=!1,e))).catch(this.handleError)}catch(r){this.handleError(r)}}}}},L={key:0,class:"ur-form__actions"},R=f("button",{type:"submit",class:"btn -primary"},"Submit",-1);P.render=function(e,t,r,n,o,a){var i;const l=s("unrest-field");return c(),d("form",{onSubmit:t[3]||(t[3]=p(((...e)=>a.submit&&a.submit(...e)),["prevent"])),class:["ur-form",e.loading&&"-loading"]},[f(l,{modelValue:r.state,"onUpdate:modelValue":t[1]||(t[1]=e=>r.state=e),field:a.prepped_schema,key:a.prepped_schema.id,onChange:a.change,onInput:a.input},null,8,["modelValue","field","onChange","onInput"]),(c(!0),d(h,null,m(null==(i=a.computed_errors)?void 0:i.__root,((e,t)=>(c(),d("div",{key:t,class:"form-error"},v(e.message||e),1)))),128)),r.onSubmit?(c(),d("div",L,[y(e.$slots,"actions",{},(()=>[r.onCancel?(c(),d("div",{key:0,type:"cancel",class:"btn -secondary",onClick:t[2]||(t[2]=(...e)=>r.onCancel&&r.onCancel(...e))},"Cancel")):b("",!0),R,y(e.$slots,"extra_actions")]))])):b("",!0)],34)};const T={inject:["ur_form"],props:{field:Object,form:Object,modelValue:null},emits:["update:modelValue"],computed:{error(){var e;let t=null==(e=this.ur_form.internal_errors)?void 0:e[this.field.__path.join(".")];return Array.isArray(t)&&(t=t[0]),(null==t?void 0:t.message)&&(t=t.message),t},css(){return{root:[`form-group form-group__${this.field.name}`,{"-error":this.error}]}}},methods:{showLabel:e=>e.title&&"__root"!==e.name&&!["unrest-checkbox"].includes(e.ui.tagName)}},B={class:"input-wrapper"},D={key:1,class:"form-error"},z={key:2,class:"description"};T.render=function(e,t,r,n,o,a){return"unrest-hidden"!==r.field.ui.tagName?(c(),d("div",{key:0,class:a.css.root},[a.showLabel(r.field)?(c(),d("label",{key:0,for:r.field.id},v(r.field.title),9,["for"])):b("",!0),f("div",B,[(c(),d(_(r.field.ui.tagName),{field:r.field,modelValue:r.modelValue,"onUpdate:modelValue":t[1]||(t[1]=t=>e.$emit("update:modelValue",t))},null,8,["field","modelValue"]))]),a.error?(c(),d("div",D,v(a.error),1)):r.field.description?(c(),d("div",z,v(r.field.description),1)):b("",!0)],2)):b("",!0)};const M={props:{modelValue:null,field:Object},emits:["update:modelValue"],computed:{mixed(){return"mixed"===this.modelValue},css(){const{mixed:e}=this,{disabled:t}=this.field;return[this.field.ui.css,"ur-checkbox -"+this.icon,{"-mixed":e,"-disabled":t}]},icon(){return this.mixed?"indeterminate":this.modelValue?"checked":"unchecked"}},methods:{onChange(){this.field.disabled||this.$emit("update:modelValue",!this.modelValue)}}};M.render=function(e,t,r,n,o,a){return c(),d("label",{class:a.css},[f("input",{type:"checkbox",id:r.field.id,checked:r.modelValue,onInput:t[1]||(t[1]=(...e)=>a.onChange&&a.onChange(...e)),name:r.field.name},null,40,["id","checked","name"]),g(" "+v(r.field.title),1)],2)};var q=(e,t={})=>Array.isArray(e)?((e,t={})=>{if(!t.type||"array"===t.type)return e;if("string"===t.type)return e.join(",");if("object"===t.type)return Object.fromEntries(e.map((e=>[e,!0])));throw`Unknow value "${e}" for field type "${t.type}"`})(e,t):"number"===t.type||"integer"===t.type?""===e?NaN:Number(e):"array"===t.type&&"string"==typeof e?e.split(t.delimiter||",").map((e=>e.trim())).filter(Boolean):e,W=e=>{var t,r;let n;if(e.getChoices)n=e.getChoices();else{const o=e.enum||(null==(t=e.items)?void 0:t.enum),a=e.enumNames||(null==(r=e.items)?void 0:r.enumNames)||o;n=o.map(((e,t)=>({value:e,name:a[t]})))}return e.placeholder&&n.unshift({name:e.placeholder,value:""}),n};const G=e=>(e||(e=[]),"string"==typeof e&&(e=e.split(",")),Array.isArray(e)||(e=Object.keys(e).filter((t=>e[t]))),e),H={props:{modelValue:null,field:Object},emits:["update:modelValue"],data(){return{internal_value:G(this.modelValue)}},computed:{choices(){const e=W(this.field),{disabled:t}=this.field;return e.forEach((e=>{var r;e.checked=null==(r=this.internal_value)?void 0:r.includes(e.value),e.class=["ur-checkbox",e.checked?"-checked":"-unchecked",t&&"-disabled"]})),e}},watch:{modelValue(){this.internal_value=G(this.modelValue)}},methods:{change(e){this.field.disabled||(this.internal_value.includes(e)?this.internal_value=this.internal_value.filter((t=>t!==e)):this.internal_value.push(e),this.$emit("update:modelValue",q(this.internal_value,this.field)))}}},Z={class:"unrest-checkboxes"};let J;H.render=function(e,t,r,n,o,a){return c(),d("div",Z,[(c(!0),d(h,null,m(a.choices,((e,t)=>(c(),d("label",{class:e.class,key:t},[f("input",{type:"checkbox",checked:e.checked,onInput:()=>a.change(e.value),name:e.name},null,40,["checked","onInput","name"]),g(" "+v(e.name),1)],2)))),128))])};const K={props:{modelValue:String,field:Object},emits:["update:modelValue"],data(){return{internal_value:this.modelValue}},mounted(){if(!J&&!this.$.appContext.components["date-picker"])if(J=!0,this.$.appContext.components.datepicker)console.error('"datepicker" component should be registered as "date-picker"');else{const e="https://github.com/chriscauley/unrest-vue-form#datetime-fields";console.error(`Warning, unable to find vue date picker. See ${e}`)}},methods:{close(){var e;const{internal_value:t}=this;this.$emit("update:modelValue",(null==(e=null==t?void 0:t.toISOString)?void 0:e.call(t))||null);this.$el.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))}}},Q={class:"unrest-datetime"};K.render=function(e,t,r,n,o,a){const i=s("date-picker");return c(),d("div",Q,[f(i,{modelValue:o.internal_value,"onUpdate:modelValue":t[1]||(t[1]=e=>o.internal_value=e),onClosed:a.close},null,8,["modelValue","onClosed"])])};const X={props:{modelValue:null,field:Object},emits:["update:modelValue"],data(){return{original:this.modelValue}},computed:{name(){var e,t,r;return(null==(e=this.modelValue)?void 0:e.name)||(null==(r=null==(t=this.modelValue)?void 0:t.split)?void 0:r.call(t,"/").pop())},css(){var e,t;return[null==(t=null==(e=this.field)?void 0:e.ui)?void 0:t.css,"ur-file"]},src(){var e;return(null==(e=this.modelValue)?void 0:e.dataURL)||this.modelValue},required:()=>!1},methods:{set(e){this.$emit("update:modelValue",e);const t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!0),this.$el.dispatchEvent(t)},onChange(e){const t=this.$refs.input.files[0];if(!t)return;const r=new FileReader;r.addEventListener("load",(()=>{const n={dataURL:r.result,name:t.name};this.$emit("update:modelValue",n),this.$refs.input.value="",this.$el.dispatchEvent(e)}),!1),r.readAsDataURL(t)}}},Y={class:"name"},ee=f("div",{class:"btn -primary"}," Choose File ",-1);X.render=function(e,t,r,n,o,a){return c(),d("label",{for:r.field.id,class:a.css},[f("input",{style:{display:"none"},type:"file",id:r.field.id,onChange:t[1]||(t[1]=p(((...e)=>a.onChange&&a.onChange(...e)),["stop"])),ref:"input"},null,40,["id"]),f("div",null,[r.modelValue?(c(),d("img",{key:0,src:a.src},null,8,["src"])):b("",!0)]),f("div",null,[f("div",Y,v(a.name),1),o.original&&o.original!==r.modelValue?(c(),d("div",{key:0,class:"fa fa-undo cursor-pointer",onClick:t[2]||(t[2]=p((e=>a.set(o.original)),["prevent"])),title:"Revert to original value",role:"button"})):b("",!0),a.src&&!a.required?(c(),d("div",{key:1,class:"fa fa-trash",onClick:t[3]||(t[3]=e=>a.set(null))})):b("",!0),ee])],10,["for"])};const te={inject:["ur_form"],props:{field:Object,modelValue:Object},computed:{children(){return Object.entries(this.field.properties).map((([e,t])=>N(e,t,this.ur_form,this.field.__path)))}}};te.render=function(e,t,r,n,o,a){const i=s("unrest-field");return c(!0),d(h,null,m(a.children,(e=>(c(),d(i,{key:e.id,field:e,modelValue:r.modelValue[e.name],"onUpdate:modelValue":t=>r.modelValue[e.name]=t},null,8,["field","modelValue","onUpdate:modelValue"])))),128)};var re="[object GeneratorFunction]",ne="object"==typeof x&&x&&x.Object===Object&&x,oe="object"==typeof self&&self&&self.Object===Object&&self,ae=ne||oe||Function("return this")();function ie(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function le(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var ue=Object.prototype,se=ue.hasOwnProperty,ce=ue.toString,de=ae.Symbol,pe=ue.propertyIsEnumerable,fe=de?de.isConcatSpreadable:void 0,he=Math.max;function me(e,t,r,n,o){var a=-1,i=e.length;for(r||(r=ve),o||(o=[]);++a<i;){var l=e[a];t>0&&r(l)?t>1?me(l,t-1,r,n,o):le(o,l):n||(o[o.length]=l)}return o}function ve(e){return be(e)||function(e){return function(e){return _e(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?ce.call(e):"";return"[object Function]"==t||t==re}(e)}(e)}(e)&&se.call(e,"callee")&&(!pe.call(e,"callee")||"[object Arguments]"==ce.call(e))}(e)||!!(fe&&e&&e[fe])}function ye(e){if("string"==typeof e||function(e){return"symbol"==typeof e||_e(e)&&"[object Symbol]"==ce.call(e)}(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}var be=Array.isArray;function _e(e){return!!e&&"object"==typeof e}var ge,je,we=(ge=function(e,t){return null==e?{}:function(e,t){return function(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var i=t[n],l=e[i];r(l,i)&&(a[i]=l)}return a}(e=Object(e),t,(function(t,r){return r in e}))}(e,function(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(me(t,1),ye))},je=he(void 0===je?ge.length-1:je,0),function(){for(var e=arguments,t=-1,r=he(e.length-je,0),n=Array(r);++t<r;)n[t]=e[je+t];t=-1;for(var o=Array(je+1);++t<je;)o[t]=e[t];return o[je]=n,ie(ge,this,o)});const Oe={props:{modelValue:null,field:Object},emits:["update:modelValue"],data(){return{showError:!1,value:this.modelValue}},computed:{inputAttrs(){const e=we(this.field,["name","disabled","placeholder","id","readOnly"]);return e.type=this.field.ui.type,e.class="form-control",e},textarea(){return"Textarea"===this.field.__widget}},watch:{modelValue(){this.value=this.modelValue}},methods:{onChange(){const e=q(this.value,this.field);"number"===this.field.type&&isNaN(e)||this.$emit("update:modelValue",e)}}};Oe.render=function(e,t,r,n,o,a){return a.textarea?j((c(),d("textarea",w({key:0},a.inputAttrs,{"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),onInput:t[2]||(t[2]=(...e)=>a.onChange&&a.onChange(...e))}),null,16)),[[O,o.value]]):j((c(),d("input",w({key:1},a.inputAttrs,{"onUpdate:modelValue":t[3]||(t[3]=e=>o.value=e),onInput:t[4]||(t[4]=(...e)=>a.onChange&&a.onChange(...e))}),null,16)),[[V,o.value]])};const Ve={mixins:[Oe],data:()=>({show_password:!1}),computed:{iconClass(){return"input-group-append cursor-pointer fa fa-eye"+(this.show_password?"-slash":"")},type(){return this.show_password?"text":"password"}}},ke={class:"input-group"};Ve.render=function(e,t,r,n,o,a){return c(),d("div",ke,[j(f("input",w(e.inputAttrs,{onInput:t[1]||(t[1]=(...t)=>e.onChange&&e.onChange(...t)),"onUpdate:modelValue":t[2]||(t[2]=t=>e.value=t),class:"form-control",type:a.type}),null,16,["type"]),[[V,e.value]]),f("i",{class:a.iconClass,onClick:t[3]||(t[3]=e=>o.show_password=!o.show_password)},null,2)])};const Ce={props:{modelValue:null,field:Object,form:Object},emits:["update:modelValue"],computed:{choices(){return W(this.field)}},methods:{onChange(e){this.$emit("update:modelValue",q(e,this.field))},getClass(e){return["btn",q(e.value)===this.modelValue?"-primary":"-secondary"]}}},Ae={class:"btn-group"};Ce.render=function(e,t,r,n,o,a){return c(),d("div",null,[f("div",Ae,[(c(!0),d(h,null,m(a.choices,(e=>(c(),d("button",{key:e.value,class:a.getClass(e),onClick:()=>a.onChange(e.value),type:"button"},v(e.name),11,["onClick"])))),128))]),f("input",{type:"hidden",value:r.modelValue,id:r.field.id},null,8,["value","id"])])};const xe={props:{field:Object,modelValue:Number},emits:["update:modelValue"],computed:{inputAttrs(){return we(this.field.ui,["min","max","step"])}},methods:{change(e){this.$emit("update:modelValue",Number(e.target.value))}}},Ee={class:"ur-range"},$e={class:"ur-range__value"};xe.render=function(e,t,r,n,o,a){return c(),d("div",Ee,[f("input",w({type:"range"},a.inputAttrs,{onInput:t[1]||(t[1]=(...e)=>a.change&&a.change(...e)),onChange:t[2]||(t[2]=(...e)=>a.change&&a.change(...e)),value:r.modelValue}),null,16,["value"]),f("div",$e,v(r.modelValue),1)])};const Se={props:{modelValue:null,field:Object,form:Object},emits:["update:modelValue"],computed:{choices(){return W(this.field)}},methods:{onChange(e){const t=q(e.target.value,this.field);this.$emit("update:modelValue",t)}}};Se.render=function(e,t,r,n,o,a){return c(),d("select",{onInput:t[1]||(t[1]=(...e)=>a.onChange&&a.onChange(...e)),value:r.modelValue,id:r.field.id,class:"form-control",disabled:r.field.disabled},[(c(!0),d(h,null,m(a.choices,(e=>(c(),d("option",{value:e.value,key:e.name},v(e.name),9,["value"])))),128))],40,["value","id","disabled"])};const Ie={Form:P,Field:T,Checkbox:M,Checkboxes:H,DateTime:K,Image:X,Object:te,RadioButtons:Ce,Range:xe,Select:Se,Text:Oe,Password:Ve},Ue=(Fe=l({coerce:q,getChoices:W,prepField:N,parseLazySchema:U,plugin:{install:e=>{console.warn("DEPRACATED: app.use(UrForm) is now preferred"),e.use(Ue)}}},Ie),t(Fe,r({install:e=>{Object.entries(Ie).forEach((([t,r])=>e.component("Unrest"+t,r)))}})));var Fe;export default Ue;
